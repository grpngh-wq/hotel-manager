<!doctype html>
<html>
<head><meta charset="utf-8"><title>Manager â€” Inventory & Staff</title></head>
<body>
  <h1>Manager Panel</h1>
  <p>Use your secret to operate (keep it private)</p>

  <label>Manager secret: <input id="secret" type="password"></label>

  <h2>Add item</h2>
  <label>Item: <input id="itemName"></label>
  <label>Price: <input id="itemPrice" type="number" step="0.01"></label>
  <button id="addItemBtn">Add Inventory</button>

  <h2>Add staff</h2>
  <label>Name: <input id="staffName"></label>
  <button id="addStaffBtn">Add Staff</button>

<script>
const WEBAPP_URL = 'https://script.google.com/macros/s/AKfycbzPMEFjP9zxhUHQ8HxgkMRJSP6GFQFIlQ4JTVo2ghNygK__FvYakEdEX6-JiLiVwgZjmw/exec'; // same webapp

function encodeForm(data) {
  return new URLSearchParams(data).toString();
}
async function api(payload){
  const res = await fetch(WEBAPP_URL, {
    method: 'POST',
    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
    body: encodeForm(payload)
  });
  return res.json();
}

document.getElementById('addItemBtn').addEventListener('click', async () => {
  const secret = document.getElementById('secret').value;
  const name = document.getElementById('itemName').value;
  const price = document.getElementById('itemPrice').value;
  const res = await api({action:'addInventory', name: name, price: price, secret: secret});
  alert(JSON.stringify(res));
});

document.getElementById('addStaffBtn').addEventListener('click', async () => {
  const secret = document.getElementById('secret').value;
  const name = document.getElementById('staffName').value;
  const res = await api({action:'addStaff', name: name, secret: secret});
  alert(JSON.stringify(res));
});
</script>
</body>
</html>
